<canvas id='V'>
<script type="text/javascript" src="stats.min.js"></script>
<script>
C = V.getContext('2d');

// AUDIO
/*
e = '';
M = [e = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAwF0AAMBdAAABAAgAZGF0YQAA'];
for (t = 0; t++ < 8e5;) {
    e += btoa(String.fromCharCode('12132425363748498765'[(t >> 10 & 15) + (t >> 13 & 4)] * t & 96, Math.random() * 127 * (Math.pow(t / 144000 % 1, 16) / 4 + Math.pow(1 - t / 144000 % 1, 64)), t >> 10 & 7 ^ 5 || Math.random() * 127));
}
Z = new Audio(e);
Z.play();*/

V.style.position='fixed';
V.style.top = 0;
V.style.bottom = 0;
V.style.right = 0;
V.style.left = 0;
V.width = W = innerWidth;
V.height = H = innerHeight;
//H=1;

z=80;
mc=Math.cos,ms=Math.sin;
t=l=o=q=j=s=v=e=1;
n=.01745;
//px=ob();
px=ob();
ff=[function(q){return mc(4*q)},function(q){return sm(4*q)-mc(q)},function(q){return q;}],f=ff[0];
function u() 
{
	m=++t>40;
	//i=0;
	for(i=(W*H/z|0)-1;i--;)
	{
		//if (m&&x.x>200/*&&x.x<1200&&x.y>160&&x.y<241*/) x.x-=10*.16, x.ix-=10*.16; //&&x.y>200&&x.y<640) 
		//if (m&&x.x>180&&x.x<200) l=n*q, x.x+=25*mc(l), x.y+=25*ms(l);
		//if (!x.t&&m&&x.x>180&&x.x<200) x.t=1;
		//if (x.t) l=n*q, x.x= x.ix + 500*mc(l), x.y= x.iy + 300*ms(3*l);
		//if (!m) q=0;
		//if (m&&x.t) l=n*q, ro=ms(Math.pow(q,2))-1.7, x.x= x.ix + 100*ro*mc(l), x.y= x.iy + 100*ro*ms(l);
		//if (m&&x.t) l=n*q, ro=Math.exp(ms(q))-2*mc(4*q)+Math.pow(ms((2*q-3.1415)/24),5), x.x= x.ix + 100*ro*mc(l), x.y= x.iy + 100*ro*ms(l);
		//if (x.t) l=n*q, x.x= x.ix + 100*(ms(l)*(Math.exp(mc(l))-2*mc(4*l)-Math.pow(ms(l/12),5))), x.y= x.iy + 100*(mc(l)*(Math.exp(mc(l))-2*mc(4*l)-Math.pow(ms(l/12),5)));		// BUTTERFLY YAY
		x=px[i];
		if (!x) continue;
		if (m&&x.t==1&&x.l<x.d&&o!=6) x.y=eioq(x.l,x.iy,x.py-x.iy,x.d), x.l+=.16;
		if (x.t==1&&x.l>x.d) x.l=0,x.t=0, x.d=60+.1*x.x-.05*x.y,x.ix=x.x, x.iy=x.y;
		if (!x.t) ++x.o;
		if (x.o>x.d) q=x.l*n, ro=f(q), x.x=x.ix+k*ro*mc(q), x.y=x.iy+(k+s)*ro*ms(q), x.l-=j*v*.16;
		if (j<0&&s>60) x.ix=x.x, x.iy=x.y, x.t=2, x.l=0, x.d=.1*x.x+.1*x.y,x.o=0;
		if (x.t>1) ++x.o;
	//	if (o>5&&o<7) x.l=0, x.d=10+.2*(x.y/z|0-1), x.py=(i/(W/z|0))*z, x.y=x.py+10*z, x.iy=x.y, x.x=(i%(W/z|0))*z, x.t=1,x.o=0;
	}
	if (o<4&&t%500==0) o=0;
	if (j>0&&s>60) s=-5,v=5,j=-j,f=ff[j?0:1];
	if (j<0&&s>60) f=ff[2], v=50, j=-j,k=70,s=0,o=5;
	if (!o&&t%20==0) s+=3,v+=1;
	if (o>4&&o<7&&t%820==0) o=6; 
	if (o>5&&t%300==0) o=1, m=0,f=ff[0],px=e?genT(1):ob(), e=1-e;//LOOOP

	//if (t%120==0) s+=2,v+=1;
	//if () s=200;
	//if (s==20) j=-j,s=10;
	console.log(j + " " + s + " " + o);
}
 

function colors()
{
	h=['f00','0f0','00f'],c=[];
	for(i=W*H;i-=z;c.push(h[Math.random()*3|0]));
	return c;
}

function eioq(t, b, c, d) 
{
	t /= d/2;if (t < 1) return c*.5*t*t + b;
	t--;return -c*.5 * (t*(t-2) - 1) + b;
};

function ob()
{
	h=colors();c=[];
	for(i=W*H;i-=z;){ 
	j=i%W;k=i/W|0;l=i/z|0;
	c.push({x:j,y:(20+k)*z,c:'#'+h[l-1],s:z,t:1,ix:j,iy:(20+k)*z,d:10+.2*(l-1),px:j,py:k*z,l:0,o:0})}
	//c.push({x:5*z,y:5*z,c:'#'+h[0],s:z,t:0,ix:5*z,iy:5*z,d:10+.2*(l-1),px:j,py:10*z,l:0})//}
	j=1;s=-5;v=5;k=30;
	return c;
}

function genT(yy)
{
	h=['f00','0f0','00f'];
	txt=[0,0,1,1,0,0,1,1,1,0,0,1,0,1,0,1,1,1,0,0,
		 0,0,1,0,1,0,1,1,0,0,0,1,1,1,0,1,0,1,0,0,
		 0,0,1,1,0,0,1,1,1,0,0,1,0,1,0,1,1,1,0,0,
		 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
		 0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,
		 0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,
		 0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0];c=[];
	for(i=139;i--;)
		if(txt[i]) c.push({x:(i%20)*z,y:(20+yy)*z,c:'#'+h[Math.random()*3|0],s:z,t:1,ix:(i%20)*z,iy:(20+yy)*z,d:10+.2*yy,px:(i%20)*z,py:(yy+i/20|0)*z,l:0,o:0});
	j=1;s=-5;v=5;k=30;
	return c;
}

function r()
{
	//p=++t%5|0;l=(l+(p?0:1))%(H/z|0);
	
	//o=!p?1+Math.random()*2|0:o;
	//C.globalAlpha = .1;
	C.fillStyle='#000';
	C.fillRect(0,0,W,innerHeight);
	//i=0;
	for(i=(W*H/z|0)-1;i--;)
	{
		//console.log(i + " " + i%W + " " + (i/W|0) );
		//x=i%W,y=(i/W|0)*z;
		//if (!m) C.fillStyle='#'+h[y>l?0:o],C.fillRect(x,y*z,z,z),q=0;
		//else C.fillStyle='#'+h[0]; j=q*n; /*C.fillRect(x*.5+x*mc(l)+y*ms(l),y*.5+y*mc(l)-x*ms(l),z,z);*/ C.fillRect(x + 25*mc(l),y + 25*ms(l),z,z);
		//C.fillStyle='#'+ h[i];
		//if (m&&x>200&&x<1200&&y>200&&y<640) C.fillStyle='#0f0', C.fillRect(,y,z,z);
		//else C.fillRect(x,y,z,z);
		x=px[i];
		if (!x) continue;
	//	if (x.t || (x.x>200&&x.x<1200&&x.y>160&&x.y<241))
		if (o!=6) C.fillStyle=x.c, C.fillRect(x.x,x.y,x.s,x.s);
	}
}

var stats = new Stats();
	stats.setMode(0);
	
	//align right 
	stats.domElement.className = "fps";
	document.body.appendChild( stats.domElement );
(function rn(t) {
	stats.begin();
	u();
	r();
	stats.end();
	requestAnimationFrame(rn);
})()
</script>